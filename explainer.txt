# AI Merge Bot v1 - Project Explainer

## Overview
AI Merge Bot v1 is an intelligent DevOps tool designed to detect and analyze risky semantic merge conflicts in Git repositories, specifically focusing on scenarios where files have been moved in a pull request (PR) branch but have also been modified in the main branch. The bot leverages Google's Gemini AI to provide detailed explanations and actionable resolutions for detected conflicts.

## Technologies Used
- **Python 3**
- **GitPython**: For interacting with Git repositories programmatically.
- **Rich**: For beautiful console output and progress indicators.
- **Google Generative AI (Gemini)**: For advanced conflict analysis and resolution suggestions.
- **Docker

## How It Works
1. **Environment Setup**: Requires the `GEMINI_API_KEY` environment variable for Gemini API access.
2. **Repository Analysis**:
   - Fetches the latest `origin/main` branch.
   - Finds the merge base between the current `HEAD` and `origin/main`.
   - Detects files that have been moved in the PR branch and also modified in the main branch (potential semantic conflicts).
3. **Conflict Analysis**:
   - If risky moves are detected, the bot uses Gemini AI to explain the conflict and suggest exact Git commands to resolve it.
   - The analysis is printed to the console and saved to `comment.txt`.
   - If no conflicts are found, a success message is displayed and written to `comment.txt`.

## How to Run
1. **Install Dependencies**:
   ```bash
   pip install -r requirements.txt
   ```
2. **Set Environment Variable**:
    - Obtain a Google Gemini API key and set it in your environment:
       - On Linux/macOS:
          ```bash
          export GEMINI_API_KEY=your_api_key_here
          ```
       - On Windows (PowerShell):
          ```powershell
          $env:GEMINI_API_KEY="your_api_key_here"
          ```
3. **Run the Bot**:
   ```bash
   python agent.py
   ```
   - Make sure you are in the root directory of your Git repository.

## Output
- The bot prints status and analysis to the console using Rich formatting.
- A detailed report is saved to `comment.txt` in the working directory.

## Error Handling
- The bot will exit with an error message if the `GEMINI_API_KEY` is not set or if the repository cannot be accessed.
- If risky semantic merge conflicts are detected, the bot exits with a non-zero status after reporting.

## Project Files
- `agent.py`: Main script containing all logic.
- `requirements.txt`: Pyt
hon dependencies.
- `comment.txt`: Output report generated by the bot (created at runtime).

## Notes
- Ensure you have network access to fetch from the remote repository and to use the Gemini API.
- The bot is intended for use in CI/CD pipelines or as a pre-merge check for teams practicing trunk-based development.

## No Errors Detected
- The code in `agent.py` was checked and no errors were found.

---
Generated on January 22, 2026.
